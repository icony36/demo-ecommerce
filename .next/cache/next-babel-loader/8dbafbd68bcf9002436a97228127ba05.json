{"ast":null,"code":"import React, { useState, useContext } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CheckoutCart from \"../components/checkout/CheckoutCart\";\nimport Billing from \"../components/checkout/Billing\";\nimport Payment from \"../components/checkout/Payment\";\nimport Confirm from \"../components/checkout/Confirm\";\nimport CheckoutStyles from \"../styles/CheckoutStyles\";\nimport { ShopContext } from \"../contexts/ShopContext\";\nimport useInputState from \"../hooks/useInputState\";\nimport { formatCreditCardNumber, formatCVC, formatExpirationDate } from \"../components/checkout/CardFormat\";\nimport axios from \"axios\";\nconst useStyles = makeStyles(CheckoutStyles);\nconst initCheckout = {\n  country: \"\",\n  city: \"\",\n  zipcode: \"\",\n  address: \"\",\n  name: \"\",\n  companyName: \"\",\n  phone: \"\",\n  email: \"\",\n  cardType: \"\",\n  cardNum: \"\",\n  cardName: \"\",\n  cvc: \"\",\n  expiry: \"\",\n  items: []\n};\nconst steps = [\"Shopping Cart\", \"Billing & Shipping Method\", \"Payment Method\", \"Confirm Order\"];\n\nconst Checkout = () => {\n  function getStepContent(step) {\n    switch (step) {\n      case 0:\n        return React.createElement(CheckoutCart, {\n          checkoutInput: checkoutInput,\n          setCheckoutInput: setCheckoutInput\n        });\n\n      case 1:\n        return React.createElement(Billing, {\n          checkoutInput: checkoutInput,\n          setCheckoutInput: setCheckoutInput\n        });\n\n      case 2:\n        return React.createElement(Payment, {\n          checkoutInput: checkoutInput,\n          setCheckoutInput: setCheckoutInput,\n          handleCardInput: handleCardInput\n        });\n\n      case 3:\n        return React.createElement(Confirm, null);\n\n      default:\n        return \"Unknown step\";\n    }\n  }\n\n  const classes = useStyles();\n  const [activeStep, setActiveStep] = useState(0);\n\n  function handleNext() {\n    setActiveStep(prevActiveStep => prevActiveStep + 1);\n  }\n\n  function handleBack() {\n    setActiveStep(prevActiveStep => prevActiveStep - 1);\n  }\n\n  function handleReset() {\n    setActiveStep(0);\n  }\n\n  const {\n    cart,\n    totalItems,\n    totalAmounts\n  } = useContext(ShopContext);\n  const [checkoutInput, setCheckoutInput] = useInputState(initCheckout);\n\n  const handleCardInput = evt => {\n    if (evt.target.name === \"cardNum\") {\n      evt.target.value = formatCreditCardNumber(evt.target.value);\n      setCheckoutInput(evt);\n    } else if (evt.target.name === \"expiry\") {\n      evt.target.value = formatExpirationDate(evt.target.value);\n      setCheckoutInput(evt);\n    } else if (evt.target.name === \"cvc\") {\n      evt.target.value = formatCVC(evt.target.value);\n      setCheckoutInput(evt);\n    }\n  };\n\n  const handleSubmit = evt => {\n    evt.preventDefault();\n    const {\n      country,\n      city,\n      zipcode,\n      address,\n      name,\n      companyName,\n      phone,\n      email,\n      cardNum,\n      items\n    } = checkoutInput; // axios\n    //     .post(\"/checkout\", {\n    //         country,\n    //         city,\n    //         zipcode,\n    //         address,\n    //         name,\n    //         companyName,\n    //         phone,\n    //         email,\n    //         cardNum,\n    //         items\n    //     })\n    //     .then(res => {\n    //         console.log(\"Order is sent!: \" + res.status);\n    //     })\n    //     .catch(err => {\n    //         console.log(err, \"Can't submit order!\");\n    //     });\n\n    alert(`${country},\n            ${city},\n            ${zipcode},\n            ${address},\n            ${name},\n            ${companyName},\n            ${phone},\n            ${email},\n            ${cardNum},\n            ${items}`);\n    handleNext();\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(Container, null, React.createElement(Typography, {\n    className: classes.title,\n    variant: \"h5\"\n  }, \"Checkout\"), React.createElement(Stepper, {\n    activeStep: activeStep\n  }, steps.map((label, index) => React.createElement(Step, {\n    key: index\n  }, React.createElement(StepLabel, {\n    StepIconProps: {\n      classes: {\n        completed: classes.icon,\n        active: classes.icon\n      }\n    }\n  }, label)))), React.createElement(Paper, {\n    elevation: 0,\n    className: classes.paper\n  }, activeStep === steps.length ? React.createElement(\"div\", null, React.createElement(Typography, {\n    className: classes.instructions\n  }, \"All steps completed - you're finished\"), React.createElement(Button, {\n    onClick: handleReset,\n    className: classes.btnReset\n  }, \"Reset\")) : React.createElement(React.Fragment, null, getStepContent(activeStep), React.createElement(\"div\", null, activeStep === steps.length - 1 ? React.createElement(Button, {\n    variant: \"contained\",\n    color: \"secondary\",\n    className: classes.btnNext,\n    onClick: handleSubmit\n  }, \"Finish\") : React.createElement(Button, {\n    variant: \"contained\",\n    color: \"secondary\",\n    onClick: handleNext,\n    className: classes.btnNext\n  }, \"Next\"), React.createElement(Button, {\n    disabled: activeStep === 0,\n    onClick: handleBack,\n    className: classes.btnBack\n  }, \"Back\"))))));\n};\n\nexport default Checkout;","map":{"version":3,"sources":["/Users/iantan/Desktop/Two-Halves-Sucre/source-code/pages/checkout.js"],"names":["React","useState","useContext","makeStyles","Container","Paper","Stepper","Step","StepLabel","Button","Typography","CheckoutCart","Billing","Payment","Confirm","CheckoutStyles","ShopContext","useInputState","formatCreditCardNumber","formatCVC","formatExpirationDate","axios","useStyles","initCheckout","country","city","zipcode","address","name","companyName","phone","email","cardType","cardNum","cardName","cvc","expiry","items","steps","Checkout","getStepContent","step","checkoutInput","setCheckoutInput","handleCardInput","classes","activeStep","setActiveStep","handleNext","prevActiveStep","handleBack","handleReset","cart","totalItems","totalAmounts","evt","target","value","handleSubmit","preventDefault","alert","title","map","label","index","completed","icon","active","paper","length","instructions","btnReset","btnNext","btnBack"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CheckoutCart from \"../components/checkout/CheckoutCart\";\nimport Billing from \"../components/checkout/Billing\";\nimport Payment from \"../components/checkout/Payment\";\nimport Confirm from \"../components/checkout/Confirm\";\nimport CheckoutStyles from \"../styles/CheckoutStyles\";\nimport { ShopContext } from \"../contexts/ShopContext\";\nimport useInputState from \"../hooks/useInputState\";\nimport {\n    formatCreditCardNumber,\n    formatCVC,\n    formatExpirationDate\n} from \"../components/checkout/CardFormat\";\nimport axios from \"axios\";\n\nconst useStyles = makeStyles(CheckoutStyles);\n\nconst initCheckout = {\n    country: \"\",\n    city: \"\",\n    zipcode: \"\",\n    address: \"\",\n    name: \"\",\n    companyName: \"\",\n    phone: \"\",\n    email: \"\",\n    cardType: \"\",\n    cardNum: \"\",\n    cardName: \"\",\n    cvc: \"\",\n    expiry: \"\",\n    items: []\n};\n\nconst steps = [\n    \"Shopping Cart\",\n    \"Billing & Shipping Method\",\n    \"Payment Method\",\n    \"Confirm Order\"\n];\n\nconst Checkout = () => {\n    function getStepContent(step) {\n        switch (step) {\n            case 0:\n                return (\n                    <CheckoutCart\n                        checkoutInput={checkoutInput}\n                        setCheckoutInput={setCheckoutInput}\n                    />\n                );\n            case 1:\n                return (\n                    <Billing\n                        checkoutInput={checkoutInput}\n                        setCheckoutInput={setCheckoutInput}\n                    />\n                );\n            case 2:\n                return (\n                    <Payment\n                        checkoutInput={checkoutInput}\n                        setCheckoutInput={setCheckoutInput}\n                        handleCardInput={handleCardInput}\n                    />\n                );\n            case 3:\n                return <Confirm />;\n            default:\n                return \"Unknown step\";\n        }\n    }\n\n    const classes = useStyles();\n    const [activeStep, setActiveStep] = useState(0);\n\n    function handleNext() {\n        setActiveStep(prevActiveStep => prevActiveStep + 1);\n    }\n\n    function handleBack() {\n        setActiveStep(prevActiveStep => prevActiveStep - 1);\n    }\n\n    function handleReset() {\n        setActiveStep(0);\n    }\n\n    const { cart, totalItems, totalAmounts } = useContext(ShopContext);\n    const [checkoutInput, setCheckoutInput] = useInputState(initCheckout);\n\n    const handleCardInput = evt => {\n        if (evt.target.name === \"cardNum\") {\n            evt.target.value = formatCreditCardNumber(evt.target.value);\n            setCheckoutInput(evt);\n        } else if (evt.target.name === \"expiry\") {\n            evt.target.value = formatExpirationDate(evt.target.value);\n            setCheckoutInput(evt);\n        } else if (evt.target.name === \"cvc\") {\n            evt.target.value = formatCVC(evt.target.value);\n            setCheckoutInput(evt);\n        }\n    };\n\n    const handleSubmit = evt => {\n        evt.preventDefault();\n\n        const {\n            country,\n            city,\n            zipcode,\n            address,\n            name,\n            companyName,\n            phone,\n            email,\n            cardNum,\n            items\n        } = checkoutInput;\n        // axios\n        //     .post(\"/checkout\", {\n        //         country,\n        //         city,\n        //         zipcode,\n        //         address,\n        //         name,\n        //         companyName,\n        //         phone,\n        //         email,\n        //         cardNum,\n        //         items\n        //     })\n        //     .then(res => {\n        //         console.log(\"Order is sent!: \" + res.status);\n        //     })\n        //     .catch(err => {\n        //         console.log(err, \"Can't submit order!\");\n        //     });\n        alert(\n            `${country},\n            ${city},\n            ${zipcode},\n            ${address},\n            ${name},\n            ${companyName},\n            ${phone},\n            ${email},\n            ${cardNum},\n            ${items}`\n        );\n        handleNext();\n    };\n\n    return (\n        <React.Fragment>\n            <Container>\n                <Typography className={classes.title} variant=\"h5\">\n                    Checkout\n                </Typography>\n                <Stepper activeStep={activeStep}>\n                    {steps.map((label, index) => (\n                        <Step key={index}>\n                            <StepLabel\n                                StepIconProps={{\n                                    classes: {\n                                        completed: classes.icon,\n                                        active: classes.icon\n                                    }\n                                }}\n                            >\n                                {label}\n                            </StepLabel>\n                        </Step>\n                    ))}\n                </Stepper>\n                <Paper elevation={0} className={classes.paper}>\n                    {activeStep === steps.length ? (\n                        <div>\n                            <Typography className={classes.instructions}>\n                                All steps completed - you&apos;re finished\n                            </Typography>\n                            <Button\n                                onClick={handleReset}\n                                className={classes.btnReset}\n                            >\n                                Reset\n                            </Button>\n                        </div>\n                    ) : (\n                        <React.Fragment>\n                            {getStepContent(activeStep)}\n                            <div>\n                                {activeStep === steps.length - 1 ? (\n                                    <Button\n                                        variant=\"contained\"\n                                        color=\"secondary\"\n                                        className={classes.btnNext}\n                                        onClick={handleSubmit}\n                                    >\n                                        Finish\n                                    </Button>\n                                ) : (\n                                    <Button\n                                        variant=\"contained\"\n                                        color=\"secondary\"\n                                        onClick={handleNext}\n                                        className={classes.btnNext}\n                                    >\n                                        Next\n                                    </Button>\n                                )}\n\n                                <Button\n                                    disabled={activeStep === 0}\n                                    onClick={handleBack}\n                                    className={classes.btnBack}\n                                >\n                                    Back\n                                </Button>\n                            </div>\n                        </React.Fragment>\n                    )}\n                </Paper>\n            </Container>\n        </React.Fragment>\n    );\n};\n\nexport default Checkout;\n"]},"metadata":{},"sourceType":"module"}